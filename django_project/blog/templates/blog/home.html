{% extends 'blog/base.html' %}

{% block content %}

  {% for post in posts %}
    <div class="content-section">
      <!-- Media object removed with Bootstrap 5, so `d-flex` replicate the same (put username & email to the right of the pic, not below) https://getbootstrap.com/docs/5.3/utilities/flex/#media-object -->
      <div class="d-flex">

        <!-- "object-fit-cover": https://github.com/samyak1409/django/blob/main/HTML%20&%20CSS/1.%20HTML/1.%20Programming%20with%20Mosh/11.%20Images/index.html#L13, https://getbootstrap.com/docs/5.3/utilities/object-fit -->
        <img class="article-img rounded-circle object-fit-cover" src="{{ post.author.profile.pic.url }}" alt="">

        <div class="w-100">  <!-- width=100% for top-border to show entirely -->

          <!-- Post Meta Data: -->
          <h2><a class="article-title" href="{% url 'read' post.id %}">{{ post.title }}</a></h2>
          <p class="text-secondary mb-1">By {{ post.author }} on {{ post.date_posted }}</p>

          <!-- Content: -->
          <p class="border-top pt-3 mb-2">{{ post.content }}</p>

        </div>

      </div>
    </div>
  {% endfor %}

  <!-- Now, page links: -->
  <!-- I've written my own link logic, corey's logic was a lil different (https://youtu.be/acOktTcTVEQ?t=687 till 22:30). -->
  <!-- Note that the vars we're using here are passed as a context automatically: -->
  <div class="text-center">
    {% if is_paginated %}  <!-- Why are we putting this? Removing this (and remove pagination) doesn't give any error and works right. -->

      {% if page_obj.has_previous %}
        <!-- Link to First Page: -->
        {% if page_obj.number != 2 %}
          <a href="?page=1" class="btn btn-outline-info">First</a>
        {% endif %}
        <!-- Link to Prev Page: -->
        <a href="?page={{ page_obj.previous_page_number }}" class="btn btn-outline-info">{{ page_obj.previous_page_number }}</a>
      {% endif %}

      <!-- Disabled Link to Current Page: -->
      <a class="btn btn-outline-info disabled" aria-disabled="true">{{ page_obj.number }}</a>
      <!-- https://getbootstrap.com/docs/5.0/components/buttons/#disabled-state -->

      {% if page_obj.has_next %}
        <!-- Link to Next Page: -->
        <a href="?page={{ page_obj.next_page_number }}" class="btn btn-outline-info">{{ page_obj.next_page_number }}</a>
        <!-- Link to Last Page: -->
        {% if page_obj.number != page_obj.paginator.num_pages|add:'-1' %}  <!-- Direct `+`/`-` doesn't work inside code-block. -->
          <a href="?page={{ page_obj.paginator.num_pages }}" class="btn btn-outline-info">Last</a>
        {% endif %}
      {% endif %}

    {% endif %}
  </div>

{% endblock content %}
